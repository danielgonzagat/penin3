FROM python:3.10-slim

WORKDIR /app
COPY requirements-darwinacci.txt /app/
RUN pip install --no-cache-dir -r requirements-darwinacci.txt

COPY darwinacci_omega /app/darwinacci_omega
COPY common /app/common

ENV DARWINACCI_METRICS=1
ENV DARWINACCI_CKPT_DIR=/app/data/checkpoints

CMD ["python", "-m", "darwinacci_omega.scripts.run", "--preset", "fast"]
