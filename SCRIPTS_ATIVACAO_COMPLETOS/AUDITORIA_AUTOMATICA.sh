#!/bin/bash

echo "ğŸ” AUDITORIA AUTOMÃTICA - Aguardando Ciclo 1600"
echo "PID: $(cat /root/500_cycles.pid)"
echo ""

while true; do
    CICLO=$(strings /root/system_live.log | grep "CYCLE.*ULTIMATE" | tail -1 | grep -oP 'CYCLE \K[0-9]+')
    
    echo "[$CICLO/1600] Aguardando..."
    
    if [ "$CICLO" -ge 1600 ]; then
        echo ""
        echo "ğŸ‰ CICLO 1600 ATINGIDO!"
        echo ""
        echo "â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•"
        echo "VALIDAÃ‡ÃƒO: O QUE EXECUTOU NO CICLO 1600?"
        echo "â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•"
        
        echo ""
        echo "1ï¸âƒ£ DARWIN executou?"
        strings /root/system_live.log | grep -A5 "Darwin.*Novelty" | tail -10
        
        echo ""
        echo "2ï¸âƒ£ DARWIN inicializou populaÃ§Ã£o?"
        strings /root/system_live.log | grep "Pop initialized" | tail -3
        
        echo ""
        echo "3ï¸âƒ£ NOVELTY scores calculados?"
        strings /root/system_live.log | grep -E "Novel:|novelty" | tail -5
        
        echo ""
        echo "4ï¸âƒ£ AUTO-CODING executou?"
        strings /root/system_live.log | grep -A3 "Auto-coding.*improvement" | tail -8
        
        echo ""
        echo "5ï¸âƒ£ APIS consultadas?"
        strings /root/system_live.log | grep -E "Consulting|API.*OK" | tail -5
        
        echo ""
        echo "6ï¸âƒ£ INCOMPLETUDE detectou estagnaÃ§Ã£o?"
        strings /root/system_live.log | grep -i "stagnation\|intervention" | tail -5
        
        break
    fi
    
    sleep 30
done

echo ""
echo "â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•"
echo "ğŸ“Š RESUMO FINAL"
echo "â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•"
echo "Ciclo final: $(strings /root/system_live.log | grep 'CYCLE' | tail -1)"
echo "Performance: $(strings /root/system_live.log | grep 'Avg(100)' | tail -1)"
